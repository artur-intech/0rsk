%form{method: 'GET', action: '/ranked'}
  %input{type: 'hidden', name: 'path', value: path.join(' ')}
  %input{type: 'hidden', name: 'mnemo', value: mnemo}
  %input{type: 'text', name: 'q', size: 40, autocomplete: 'off', autofocus: 'true', tabindex: 1, value: query}
  %input{type: 'submit', value: 'Search', tabindex: 2}

- if mnemo != '*'
  %p
    Mnemo:
    %code= mnemo
    %a.item{href: "?path=#{path.join(' ')}&mnemo=*&q=#{query}"} x

- unless path.empty?
  %p
    Path:
    - path.each do |c|
      %code=c
      %a.item{href: "?path=#{(path - [c]).sort.uniq.join(' ')}&mnemo=#{mnemo}&q=#{query}"} x

- if ranked.empty?
  %p
    %span.red Nothing
    found, sorry.
- else
  - ranked.each do |r|
    %p
      %span{style: 'color: ' + (r[:rank] < 32 ? 'gray' : (r[:rank] > 64 ? 'orangered' : 'seagreen'))}
        = "#{r[:rank]}:"
      - r[:chunks].each do |c|
        %a{href: "?path=#{(path + [c]).sort.uniq.join(' ')}&mnemo=#{mnemo}&q=#{query}"}<
          %code= c
      = r[:text]
      %br
      %a.item.small{href: "/add?path=#{r[:path]}"} Edit
      %a.item.small{href: "/ranked/delete?id=#{r[:id]}"} Delete

%p
  - ['C', 'CR', 'CRE', 'CR*', 'CRE*', 'CREP', '*'].each do |m|
    %a.item{href: "?mnemo=#{m}&path=#{path.join(' ')}&q=#{CGI.escape(query)}"}<
      %code= m
